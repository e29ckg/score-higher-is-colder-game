<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏π‡∏á‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏≤‡∏ß - Tower Scoreboard</title>
    <style>
        /* --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô --- */
        :root {
            --bg-color: #0f172a; /* ‡∏™‡∏µ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏°‡∏∑‡∏î */
            --text-color: #ffffff;
            --tower-base-color: #3b82f6; /* ‡∏™‡∏µ‡∏ï‡∏∂‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô */
            --tower-high-color: #06b6d4; /* ‡∏™‡∏µ‡∏ï‡∏∂‡∏Å‡∏ï‡∏≠‡∏ô‡∏™‡∏π‡∏á (‡πÑ‡∏•‡πà‡πÄ‡∏â‡∏î) */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Scrollbar */
        }

        header {
            text-align: center;
            padding: 20px;
            z-index: 10;
        }

        h1 { margin: 0; text-shadow: 0 0 10px rgba(255,255,255,0.5); }

        /* --- Container ‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á --- */
        .city-landscape {
            flex: 1;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 50px;
            
            /* --- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ --- */
            width: 100%;        /* ‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
            max-width: none;    /* ‡∏•‡∏ö‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏≠‡∏≠‡∏Å (‡πÄ‡∏î‡∏¥‡∏° 1200px) */
            padding-left: 20px; /* ‡πÄ‡∏ß‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏ã‡πâ‡∏≤‡∏¢‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ */
            padding-right: 20px;/* ‡πÄ‡∏ß‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ */
            box-sizing: border-box; /* ‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏ö‡∏£‡∏ß‡∏° padding ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
            
            gap: 10px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏∂‡∏Å */
            border-bottom: 2px solid #555;
        }

        /* --- ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ó‡∏µ‡∏° (Lane) --- */
        .team-lane {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            
            /* --- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ --- */
            flex: 1;      /* ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏¢‡∏∑‡∏î‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Å‡∏¥‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î */
            width: auto;  /* ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ñ‡∏á‡∏ó‡∏µ‡πà */
            
            height: 100%; 
            position: relative;
            min-width: 50px; /* ‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏µ‡∏ö‡∏à‡∏ô‡πÄ‡∏•‡πá‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡πÉ‡∏ô‡∏à‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        }

        /* --- ‡∏ï‡∏±‡∏ß‡∏ï‡∏∂‡∏Å (Bar) --- */
        .tower {
            width: 100%;
            background: linear-gradient(to top, var(--tower-base-color), var(--tower-high-color));
            border-radius: 5px 5px 0 0;
            transition: height 0.8s cubic-bezier(0.25, 1, 0.5, 1); /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏¢‡∏∑‡∏î‡∏´‡∏î‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏• */
            position: relative;
            min-height: 5px; /* ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÅ‡∏°‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô 0 */
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
        }
        /* --- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°‡∏ö‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏∂‡∏Å --- */
        .tower-label {
            position: absolute;
            width: 100%;
            top: 10px; /* ‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡∏ï‡∏∂‡∏Å‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ */
            text-align: center;
            color: #ffffff;
            font-weight: bold;
            font-size: 1.1rem; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
            text-shadow: 0 2px 4px rgba(0,0,0,0.8); /* ‡πÄ‡∏á‡∏≤‡∏î‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ */
            
            /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πâ‡∏ô‡∏ñ‡πâ‡∏≤‡∏ï‡∏∂‡∏Å‡πÄ‡∏ï‡∏µ‡πâ‡∏¢ */
            overflow: hidden; 
            white-space: nowrap;
            pointer-events: none;
            z-index: 5;
        }

        /* ‡∏ñ‡πâ‡∏≤‡∏ï‡∏∂‡∏Å‡πÄ‡∏ï‡∏µ‡πâ‡∏¢‡∏°‡∏≤‡∏Å‡πÜ (‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡πâ‡∏≠‡∏¢) ‡πÉ‡∏´‡πâ‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°‡∏ö‡∏ô‡∏ï‡∏∂‡∏Å (‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏ï‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á) */
        .tower[style*="height: 0%"] .tower-label,
        .tower[style*="height: 1%"] .tower-label,
        .tower[style*="height: 2%"] .tower-label, 
        .tower[style*="height: 3%"] .tower-label {
            display: none;
        }

        /* --- ‡∏õ‡πâ‡∏≤‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏•‡∏≠‡∏¢‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏ï‡∏∂‡∏Å) --- */
        .score-badge {
            margin-bottom: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            transition: bottom 0.8s; /* ‡∏Ç‡∏¢‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ï‡∏∂‡∏Å */
        }

        /* --- ‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏° (‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô) --- */
        .team-name {
            margin-top: 15px;
            font-size: 1rem;
            font-weight: bold;
            color: #ccc;
            text-align: center;
        }

        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°: ‡πÄ‡∏™‡πâ‡∏ô Grid ‡∏à‡∏≤‡∏á‡πÜ ‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á */
        .grid-line {
            position: absolute;
            width: 100%;
            border-top: 1px dashed rgba(255,255,255,0.1);
            z-index: -1;
        }
        /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏°‡∏á‡∏Å‡∏∏‡∏é --- */
        .crown-icon {
            position: absolute;
            top: -65px; /* ‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô */
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.5rem; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏°‡∏á‡∏Å‡∏∏‡∏é */
            z-index: 20;
            filter: drop-shadow(0 0 10px gold); /* ‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á‡∏™‡∏µ‡∏ó‡∏≠‡∏á */
            animation: floatCrown 2s ease-in-out infinite; /* ‡∏Ç‡∏¢‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á */
        }

        /* ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏•‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á */
        @keyframes floatCrown {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÅ‡∏™‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ô‡∏≥ */
        .leader-tower {
            background: linear-gradient(to top, #f59e0b, #fbbf24) !important; /* ‡∏™‡∏µ‡∏ó‡∏≠‡∏á */
            box-shadow: 0 0 25px rgba(251, 191, 36, 0.6) !important;
        }
    </style>
</head>
<body>

    <header>
        <h1>‚ùÑÔ∏è ‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏π‡∏á‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏≤‡∏ß ‚ùÑÔ∏è</h1>
        <p>LIVE SCOREBOARD</p>
    </header>

    <div class="city-landscape" id="game-area">
        </div>

   <script>
        // ==========================================
        // ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (‡πÅ‡∏Å‡πâ‡πÅ‡∏Ñ‡πà‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ!)
        // ==========================================
        
        // 1. ‡∏ô‡∏≥ "‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏≤‡∏ß‡πÜ" (Sheet ID) ‡∏ó‡∏µ‡πà‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏°‡∏≤ ‡πÉ‡∏™‡πà‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö
        const SHEET_ID = '1HLByJ8t1NXpjXM6UIbdLSRmoYbcvgYK2arosPwQ2Pmc'; 
        
  const gameArea = document.getElementById('game-area');

    function initTowers() {
        gameArea.innerHTML = '';
        for (let i = 1; i <= 9; i++) {
            const lane = document.createElement('div');
            lane.className = 'team-lane';
            lane.innerHTML = `
                <div class="crown-area" id="crown-area-${i}"></div>
                <div class="score-badge" id="score-${i}">0</div>
                
                <div class="tower" id="tower-${i}" style="height: 0%;">
                    <div class="tower-label" id="tower-label-${i}"></div>
                </div>

                <div class="team-name" id="name-${i}">Team ${i}</div>
            `;
            gameArea.appendChild(lane);
        }
    }

    async function fetchScores() {
        if (SHEET_ID === 'YOUR_SHEET_ID_HERE') return;

        const base = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&sheet=higher-is-colder-game`;
        const url = `https://corsproxy.io/?${encodeURIComponent(base + '&t=' + Date.now())}`;

        try {
            const response = await fetch(url);
            const data = await response.text();
            
            // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏≠‡∏≤‡∏î (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢/‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡∏£‡∏£‡∏Ñ)
            const cleanData = data.replace(/"/g, ''); 
            const rows = cleanData.split('\n').slice(1);

            let allTeams = [];
            
            rows.forEach(row => {
                const cols = row.split(',');
                if (cols.length >= 3) {
                    const tID = parseInt(cols[0]);
                    let tName = cols[1] ? cols[1].trim() : `Team ${tID}`;
                    if (!tName) tName = `Team ${tID}`;
                    const tScore = parseInt(cols[2]);
                    
                    if (!isNaN(tID) && !isNaN(tScore)) {
                        allTeams.push({ id: tID, name: tName, score: tScore });
                    }
                }
            });

            updateAllTowers(allTeams);

        } catch (error) {
            console.error('Error:', error);
        }
    }

    function updateAllTowers(teamsData) {
        const maxScore = Math.max(...teamsData.map(t => t.score), 1);

        teamsData.forEach(team => {
            const tower = document.getElementById(`tower-${team.id}`);
            const scoreLabel = document.getElementById(`score-${team.id}`);
            const nameLabel = document.getElementById(`name-${team.id}`);
            const towerLabel = document.getElementById(`tower-label-${team.id}`); // ‚≠ê ‡∏à‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ô‡∏ï‡∏∂‡∏Å
            const crownArea = document.getElementById(`crown-area-${team.id}`);

            if (tower && scoreLabel) {
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ä‡∏∑‡πà‡∏≠ (‡∏ó‡∏±‡πâ‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á ‡πÅ‡∏•‡∏∞ ‡∏ö‡∏ô‡∏ï‡∏∂‡∏Å)
                if (nameLabel) nameLabel.innerText = team.name;
                if (towerLabel) towerLabel.innerText = team.name; // ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ô‡∏ï‡∏∂‡∏Å

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á
                let heightPercent = 0;
                if (team.score > 0) heightPercent = (team.score / maxScore) * 100;

                tower.style.height = `${heightPercent}%`;
                scoreLabel.textContent = team.score;

                // Reset ‡∏™‡πÑ‡∏ï‡∏•‡πå
                crownArea.innerHTML = ''; 
                tower.classList.remove('leader-tower');
                tower.style.background = ''; 

                // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡∏ô‡∏≥
                if (team.score === maxScore && team.score > 0) {
                    tower.classList.add('leader-tower');
                    crownArea.innerHTML = '<div class="crown-icon">üëë</div>';
                } else {
                    if(heightPercent > 80) {
                         tower.style.background = 'linear-gradient(to top, #3b82f6, #fff)';
                         if(!scoreLabel.innerHTML.includes('‚ùÑÔ∏è')) scoreLabel.innerHTML += ' ‚ùÑÔ∏è';
                    }
                }
            }
        });
    }

    initTowers();
    fetchScores();
    setInterval(fetchScores, 2000); 
</script>
</body>
</html>