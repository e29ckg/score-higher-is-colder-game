<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏π‡∏á‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏≤‡∏ß - Scoreboard</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a2e;
            color: #ffffff;
            text-align: center;
            padding: 20px;
            margin: 0;
            overflow-x: hidden;
        }
        h1 {
            color: #0f3460;
            text-shadow: 2px 2px 4px #e94560;
            font-size: 3em;
            margin-bottom: 5px;
        }

        /* --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ ‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ --- */
        .timer-box { margin: 20px 0; }
        .timer-display {
            font-size: 3em;
            background: #e94560;
            color: white;
            padding: 10px 30px;
            border-radius: 10px;
            font-weight: bold;
            display: inline-block;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.5);
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        
        @keyframes flashAlert {
            0%, 100% { background-color: #ff0000; transform: scale(1); box-shadow: 0 0 20px #ff0000; }
            50% { background-color: #8b0000; color: #ffd700; transform: scale(1.1); box-shadow: 0 0 50px #ff0000; }
        }
        .timer-time-up { animation: flashAlert 0.8s infinite; }

        .btn-group {
            display: flex;
            justify-content: center;
            gap: 15px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° */
        }

        .btn-start {
            background: #a8dadc; color: #1d3557; font-size: 1.2em;
            font-weight: bold; padding: 10px 20px; border: none;
            border-radius: 5px; cursor: pointer;
        }
        .btn-start:hover { background: #457b9d; color: white; }

        /* --- üÜï ‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤ (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà) --- */
        .btn-reset-time {
            background: #f4a261; color: #1d3557; font-size: 1.2em;
            font-weight: bold; padding: 10px 20px; border: none;
            border-radius: 5px; cursor: pointer; transition: all 0.3s ease;
        }
        .btn-reset-time:hover { background: #e76f51; color: white; }

        /* ‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô */
        .btn-reset {
            background: #1d3557; color: #a8dadc; font-size: 1.2em;
            font-weight: bold; padding: 10px 20px; border: 1px solid #a8dadc;
            border-radius: 5px; cursor: pointer; transition: all 0.3s ease;
        }
        .btn-reset:hover { background: #e94560; color: white; border-color: #e94560; }

        /* --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á --- */
        #scoreboard {
            max-width: 1200px;
            margin: 0 auto;
            background: #16213e;
            padding: 40px 20px 20px 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 500px;
            overflow-x: auto;
            margin-top: 20px;
        }

        .team-col {
            display: flex; flex-direction: column; align-items: center;
            justify-content: flex-end; height: 100%; width: 100px;
        }

        .score-area {
            margin-bottom: 15px; text-align: center; display: flex;
            flex-direction: column; justify-content: flex-end; align-items: center;
        }

        /* üëë ‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏á‡∏Å‡∏∏‡∏é üëë */
        @keyframes crownBounce {
            0%, 100% { transform: translateY(0) scale(1); filter: drop-shadow(0 0 5px gold); }
            50% { transform: translateY(-8px) scale(1.1); filter: drop-shadow(0 0 15px #ffeb3b); }
        }

        .crown {
            font-size: 2em; margin-bottom: 5px; min-height: 40px; 
            display: flex; align-items: center; justify-content: center;
            transition: opacity 0.5s ease;
        }

        .crown.winner { animation: crownBounce 1.5s infinite ease-in-out; opacity: 1; }
        .crown.loser { opacity: 0; animation: none; }

        /* ‚úèÔ∏è ‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‚úèÔ∏è */
        .score-input {
            width: 60px; font-size: 1.5em; font-weight: bold; color: #e94560;
            background: rgba(255, 255, 255, 0.05); border: 1px dashed #a8dadc;
            border-radius: 5px; text-align: center; outline: none; transition: all 0.3s ease;
        }

        .score-input:focus {
            background: rgba(255, 255, 255, 0.2); border: 2px solid #e94560; transform: scale(1.1);
        }

        .score-input::-webkit-outer-spin-button,
        .score-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .score-input[type=number] { -moz-appearance: textfield; }

        .bar-container {
            width: 60px; height: 350px; background: #0f3460;
            border-radius: 5px 5px 0 0; display: flex; align-items: flex-end;
        }

        .bar {
            width: 100%; background: linear-gradient(0deg, #d4a373 0%, #faedcd 100%);
            height: 0%; transition: height 0.5s ease-in-out;
            border-radius: 5px 5px 0 0; position: relative;
        }

        .team-img {
            width: 50px; height: 50px; border-radius: 50%; border: 3px solid #fff;
            object-fit: cover; position: absolute; top: 0; left: 50%;
            transform: translate(-50%, -50%); background: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.5); z-index: 2; cursor: pointer;
            transition: transform 0.2s ease;
        }

        .team-img:hover { transform: translate(-50%, -50%) scale(1.2); z-index: 10; }

        .team-name {
            margin-top: 15px; font-size: 1.2em; font-weight: bold;
            text-align: center; height: 40px; color: #a8dadc;
        }

        /* --- üñºÔ∏è ‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏õ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡∏° --- */
        #imageModal {
            display: none; position: fixed; z-index: 990; 
            left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85); 
            align-items: center; justify-content: center; flex-direction: column;
        }

        .modal-info {
            text-align: center; margin-bottom: 20px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8); animation: zoomIn 0.3s ease;
        }

        .modal-game-name { color: #a8dadc; font-size: 1.5em; margin: 0 0 10px 0; }
        .modal-team-name { color: #ffffff; font-size: 3em; margin: 0; font-weight: bold; }
        .modal-score-box {
            background: rgba(233, 69, 96, 0.8); color: white; font-size: 2em;
            font-weight: bold; padding: 5px 20px; border-radius: 10px;
            display: inline-block; margin-top: 10px; border: 2px solid #fff;
        }
        .modal-crown {
            font-size: 4em; margin-bottom: -15px;
            animation: crownBounce 1.5s infinite ease-in-out; display: none;
        }

        .modal-content {
            max-width: 80%; max-height: 50vh; border: 5px solid white;
            border-radius: 15px; box-shadow: 0 0 30px rgba(0,0,0,0.8);
            animation: zoomIn 0.3s ease; 
        }

        .close-btn {
            color: white; font-size: 50px; font-weight: bold;
            position: absolute; top: 20px; right: 40px; cursor: pointer; z-index: 1000;
        }
        .close-btn:hover { color: #e94560; }

        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* --- üö® ‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏õ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ üö® --- */
        #timeUpOverlay {
            display: none; position: fixed; z-index: 9999;
            left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            align-items: center; justify-content: center; flex-direction: column;
        }
        
        @keyframes smashDown {
            0% { transform: translateY(-300px) scale(0.2); opacity: 0; }
            60% { transform: translateY(20px) scale(1.1); opacity: 1; }
            80% { transform: translateY(-10px) scale(0.95); }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }

        .time-up-text {
            font-size: 7em; color: #ff0000; text-transform: uppercase;
            font-weight: 900; text-shadow: 0 0 20px #ff0000, 0 0 40px #ff0000, 2px 2px 0px #fff;
            margin: 0; animation: smashDown 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
        }

        .time-up-subtext { color: #fff; font-size: 2em; margin-top: 20px; animation: zoomIn 1s ease 0.5s both; }

        .btn-close-timeup {
            margin-top: 40px; background: #e94560; color: white; font-size: 1.5em;
            padding: 15px 40px; border: 2px solid white; border-radius: 50px;
            cursor: pointer; animation: zoomIn 1s ease 1s both;
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.5); transition: all 0.3s;
        }
        .btn-close-timeup:hover { background: #fff; color: #e94560; transform: scale(1.1); }

    </style>
</head>
<body>

    <h1>‚ùÑÔ∏è ‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏π‡∏á‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏≤‡∏ß ‚ùÑÔ∏è</h1>
    
    <div class="timer-box">
        <div id="timerDisplay" class="timer-display">05:00</div>
        <br>
        <div class="btn-group">
            <button id="startBtn" class="btn-start" onclick="startTimer()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 5 ‡∏ô‡∏≤‡∏ó‡∏µ</button>
            <button class="btn-reset-time" onclick="resetTimer()">‚Ü∫ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤</button>
            <button class="btn-reset" onclick="resetScores()">‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
        </div>
    </div>

    <div id="scoreboard">
        <h2 style="color: #a8dadc;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡∏à‡∏≤‡∏Å Google Sheet...</h2>
    </div>

    <div id="imageModal">
        <span class="close-btn" onclick="closeModal()">&times;</span>
        <div class="modal-info">
            <h2 class="modal-game-name">‚ùÑÔ∏è ‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏π‡∏á‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏≤‡∏ß ‚ùÑÔ∏è</h2>
            <div id="modalCrown" class="modal-crown">üëë</div>
            <h3 id="modalTeamName" class="modal-team-name">‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°</h3>
            <div class="modal-score-box">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="modalScore">0</span></div>
        </div>
        <img id="largeImage" class="modal-content" src="" alt="Large Team Image">
    </div>

    <div id="timeUpOverlay">
        <h1 class="time-up-text">‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!</h1>
        <div class="time-up-subtext">‡∏ß‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÑ‡∏°‡πâ ‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>
        <button class="btn-close-timeup" onclick="resetTimer()">‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
    </div>

    <script>
        // *** ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á Google Apps Script ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ***
        const API_URL = 'https://script.google.com/macros/s/AKfycbzWxrk6NUDH9F67p1kd__xJnE6yNdOv-yRKKay3bQpRigGmpDVsVwbZMKU0bbTwF9aT/exec'; 

        let teamsData = [];

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Sheet
        async function fetchTeamData() {
            try {
                const response = await fetch(API_URL);
                let data = await response.json();

                // üíæ ‡∏•‡∏≠‡∏á‡∏î‡∏∂‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏à‡∏≥‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                let savedScores = [];
                const localData = localStorage.getItem('yingsungyhingnao_scores');
                if (localData) {
                    savedScores = JSON.parse(localData);
                }

                teamsData = data.map((item, index) => ({
                    team: item.team,      
                    imageUrl: item.imageUrl, 
                    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ ‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á‡∏°‡∏≤‡πÉ‡∏ä‡πâ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô 0
                    score: savedScores[index] !== undefined ? savedScores[index] : 0 
                }));

                initBoard(); 
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('scoreboard').innerHTML = '<h2 style="color: #ff0000;">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google Sheet</h2>';
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏≠‡∏£‡πå‡∏î
        function initBoard() {
            const scoreboard = document.getElementById('scoreboard');
            scoreboard.innerHTML = ''; 

            teamsData.forEach((item, index) => {
                const col = document.createElement('div');
                col.className = 'team-col';
                
                col.innerHTML = `
                    <div class="score-area">
                        <div id="crown-${index}" class="crown loser">üëë</div>
                        <input type="number" class="score-input" id="scoreInput-${index}" value="${item.score}" 
                               oninput="updateScore(${index}, this.value)" min="0">
                    </div>
                    <div class="bar-container">
                        <div id="bar-${index}" class="bar" style="height: 0%;">
                            <img src="${item.imageUrl}" class="team-img" alt="team image" 
                                 onclick="openModal(${index})">
                        </div>
                    </div>
                    <div class="team-name">${item.team}</div>
                `;
                scoreboard.appendChild(col);
            });
            updateVisuals(); 
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå
        function updateScore(index, newValue) {
            teamsData[index].score = parseInt(newValue) || 0; 
            
            // üíæ ‡πÅ‡∏≠‡∏ö‡∏à‡∏≥‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏•‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå
            const scoresOnly = teamsData.map(item => item.score);
            localStorage.setItem('yingsungyhingnao_scores', JSON.stringify(scoresOnly));

            updateVisuals(); 
        }

        // üîÑ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÑ‡∏ß‡πâ)
        function resetScores() {
            // ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ú‡∏•‡∏≠‡∏Å‡∏î
            if (confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
                localStorage.removeItem('yingsungyhingnao_scores'); // ‡∏•‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏ó‡∏¥‡πâ‡∏á
                
                // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                teamsData.forEach((item, index) => {
                    item.score = 0;
                    document.getElementById(`scoreInput-${index}`).value = 0;
                });
                updateVisuals();
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏á‡∏Å‡∏∏‡∏é
        function updateVisuals() {
            const currentMaxScore = Math.max(...teamsData.map(d => d.score), 0);
            const heightMaxReference = Math.max(currentMaxScore, 1); 

            teamsData.forEach((item, index) => {
                const heightPercent = (item.score / heightMaxReference) * 100;
                const isWinner = (item.score === currentMaxScore && item.score > 0);

                document.getElementById(`bar-${index}`).style.height = `${heightPercent}%`;

                const crown = document.getElementById(`crown-${index}`);
                if (isWinner) {
                    crown.classList.add('winner'); crown.classList.remove('loser');
                } else {
                    crown.classList.add('loser'); crown.classList.remove('winner');
                }
            });
        }

        // --- üñºÔ∏è ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏ç‡πà ---
        function openModal(index) {
            const item = teamsData[index];
            const currentMaxScore = Math.max(...teamsData.map(d => d.score), 0);
            const isWinner = (item.score === currentMaxScore && item.score > 0);

            const modal = document.getElementById('imageModal');
            document.getElementById('largeImage').src = item.imageUrl;
            document.getElementById('modalTeamName').innerText = item.team;
            document.getElementById('modalScore').innerText = item.score;
            
            document.getElementById('modalCrown').style.display = isWinner ? 'block' : 'none';
            modal.style.display = 'flex'; 
        }

        function closeModal() { document.getElementById('imageModal').style.display = 'none'; }
        
        window.onclick = function(event) {
            const modal = document.getElementById('imageModal');
            if (event.target == modal) closeModal();
        }

        function closeTimeUp() { document.getElementById('timeUpOverlay').style.display = 'none'; }

        // --- ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ ---
        const DEFAULT_TIME = 5 * 60; // 5 ‡∏ô‡∏≤‡∏ó‡∏µ (300 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
        let timeInSeconds = DEFAULT_TIME; 
        let timerInterval = null;

        function startTimer() {
            if (timerInterval) return;
            document.getElementById('startBtn').style.display = 'none';

            timerInterval = setInterval(() => {
                timeInSeconds--;
                updateTimerDisplay(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠

                if (timeInSeconds <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById('timerDisplay').innerText = "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!";
                    document.getElementById('timerDisplay').classList.add('timer-time-up'); 
                    document.getElementById('timeUpOverlay').style.display = 'flex';
                }
            }, 1000);
        }

        // üîÑ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤ (‡πÉ‡∏´‡∏°‡πà)
        function resetTimer() {
            // 1. ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            // 2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
            timeInSeconds = DEFAULT_TIME;

            // 3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°
            updateTimerDisplay();
            document.getElementById('startBtn').style.display = 'block'; // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
            
            // 4. ‡∏•‡∏ö‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            document.getElementById('timerDisplay').classList.remove('timer-time-up');
            document.getElementById('timeUpOverlay').style.display = 'none';
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏ß‡∏•‡∏≤ (‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢)
        function updateTimerDisplay() {
            let minutes = Math.floor(timeInSeconds / 60).toString().padStart(2, '0');
            let seconds = (timeInSeconds % 60).toString().padStart(2, '0');
            document.getElementById('timerDisplay').innerText = `${minutes}:${seconds}`;
        }

        // üöÄ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
        // setInterval(fetchTeamData, 5000);
        fetchTeamData(); 
        
    </script>
</body>
</html>